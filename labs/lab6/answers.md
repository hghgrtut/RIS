# Лабораторная работа №6 [Spring Boot](https://spring.io/projects/spring-boot "Официальная инструкция") - [Vouk Kiryl](https://www.instagram.com/vvk.jpg/ "Я") 
## Рассмотрены следующие вопросы:
- [Что такое JDBC, JPA и Hibernate? В чем их разница](#0-что-такое-jdbc-jpa-и-hibernate-в-чем-их-разница)
- [Как развернуть приложение Spring Boot на сервере (tomcat)?](#1-как-развернуть-приложение-spring-boot-на-сервере-tomcat)
- [В чем разница между Spring Boot и Spring MVC?](#2-в-чем-разница-между-spring-boot-и-spring-mvc)
- [Что такое War-файл и отличие от Jar-файла?](#3-что-такое-war-файл-и-отличие-от-jar-файла)
- [Зачем использовать Spring Boot?](#4-зачем-использовать-spring-boot)
- [Как можно запустить Spring Boot?](#5-как-можно-запустить-spring-boot)
- [Требуется ли для запуска Spring Boot отдельный контейнер?](#6-требуется-ли-для-запуска-spring-boot-отдельный-контейнер)
- [Как настроить приложение Spring Boot с помощью maven?](#7-как-настроить-приложение-spring-boot-с-помощью-maven)
- [Какие встроенные серверы поддерживает Spring Boot?](#8-какие-встроенные-серверы-поддерживает-spring-boot)
- [Для чего используются аннотации @RestController и @Controller?](#9-для-чего-используются-аннотации-restcontroller-и-controller)
- [Что такое Thymeleaf?](#10-что-такое-thymeleaf)

## `0` Что такое JDBC, JPA и Hibernate? В чем их разница

![Structure](/labs/lab6/tools/jdbcjpahiber.png)

- ## JDBC

---

### Java DataBase Connectivity (соединение с базами данных на Java) — промышленный стандарт взаимодействия Java-приложений с различными *СУБД*. Реализован в виде пакета `java.sql`, входящего в состав *Java SE*. _JDBC_ основан на концепции драйверов, которые позволяют получать соединение с базой данных по специально описанному *URL*. При загрузке драйвер регистрирует себя в системе и в дальнейшем автоматически вызывается, когда программа требует *URL*, содержащий протокол, за который этот драйвер отвечает.

- ## JPA

---

### *Java Persistence API* - это спецификация *Java EE* и *Java SE*, описывающая систему управления сохранением *java* объектов в таблицы реляционных баз данных в удобном виде. Сама *Java* не содержит реализации *JPA*, однако существует много реализаций данной спецификации от разных компаний.

- ## Hibernate

---

### *Hipernate* одна из наиболее популярных реализаций ORM-модели. Объектно-реляционная модель описывает отношения между программными объектами и записями в БД. 

- ## Различия между JDBC, JPA и Hipernate

---

### *Hibernate* одна из самых популярных открытых реализаций последней версии спецификации. То есть *JPA* только описывает правила и *API*, а *Hibernate* реализует эти описания.

### *JDBC* является гораздо более низкой спецификацией, чем *JPA*. *JDBC* - это *API-интерфейс* для взаимодействия с базой данных с использованием чистого *SQL* - отправки запросов и получения результатов. Он не имеет понятия об объектах или иерархиях. При использовании *JDBC* вам необходимо преобразовать набор результатов в объекты *Java*. 

### В *JPA* вы также указываете эти детали метаданных базы данных, но с использованием аннотаций *Java*. Таким образом, *JPA* создает запросы на обновление для вас и управляет объектами, которые вы искали.

## `1` Как развернуть приложение Spring Boot на сервере (tomcat)?

![Apache Tomcat](/labs/lab6/tools/tomcat.png)

### Для начала необходимо установить *[Tomcat](https://tomcat.apache.org/download-80.cgi "Ссылка на установку")* на свой ПК. Создать проект на сайте *[spring](https://start.spring.io/ "Ссылка на создание проекта")*, добавить при создании проекта все необходимые зависимости. ![tip](/labs/lab6/tools/spring-depen.png) Распаковать *zip-архив* и собрать проект в *IDE*, добавить всю структуру вашего проекта. Запустить приложение *Tomcat* (запуск сервера), а затем и ваш проект (при запуске проекта выбрать запуск на необходимом вам сервере, в нашем случае *Tomcat*. 

## `2` В чем разница между Spring Boot и Spring MVC?


| ![versus](/labs/lab6/tools/spring-mvc.png) | ![boot](/labs/lab6/tools/spring-boot.jpg) |
| --- | --- |
| **Нужно создавать конфигурацию вручную** | **Нет необходимости создавать конфигурацию вручную** |
| **Представление модели и веб-платформа на основе контроллера, широко используемая для разработки web-приложений** | **Spring Boot построен поверх обычного spring framework, широко используемого для разработки REST API** |
| **В Spring MVC требуется дескриптор развертывания** | **В Spring Boot нет необходимости в дескрипторе развертывания** |
| **Spring MVC определяет каждую зависимость отдельно** | **Он объединяет зависимости в единое целое** |
| **Состоит из четырех компонентов : модели, представления, контроллера и внешнего контроллера** | **В Spring Boot есть четыре основных уровня: уровень представления, уровень доступа к данным, уровень обслуживания и уровень интеграции** |
| **Готовые к использованию функции предоставляются ит для создания веб-приложений** | **Ит-службы предоставляют конфигурации по умолчанию для построения фреймворка с поддержкой Spring**|
|	**Spring MVC не обеспечивают мощной пакетной обработки** | **Мощная пакетная обработка обеспечивается Spring Boot** |
|	**Это занимает больше времени в разработк** | **Это сокращает время разработки и повышает производительность** |

## `3` Что такое War-файл и отличие от Jar-файла?

![EAR](/labs/lab6/tools/ear.png)

### **JAR – Java Archive**. Содержит файлы классов, ресурсы, зависимые библиотеки, и другие необходимые для приложения файлы. Может содержать точку входа, и использоваться как цель для исполнения команды **java**.

### **WAR – Web Archive**. Технически имеет ту же структуру, но другую роль – архив **JavaEE** web-компонента. Обычно содержит несколько **jar** с реализацией, **JSP**, статические файлы фронт-энда, и мета-информацию для сервлет-контейнера `web.xml`. В основном используется как деплоймент web-приложения в сервлет-контейнер. С приходом **Servlet API 3.0** и **embedded**-контейнеров, всё больше становится принято запаковывать и web-компоненты в самодостаточные **jar**
### :exclamation: Spring Boot: Make **jar**, not **war**.

## `4` Зачем использовать Spring Boot?

![use Spring Boot](/labs/lab6/tools/use-spring-boot.png)

### Позволение разработчикам сократить время самой разработки, что дает им возможность заниматься наиболее важными делами - главное преимущество spring boot и аргумент, положительно влияющий на использование spring boot. Уменьшает времяпровождение в файлах типа `pom.xml`

## `5` Как можно запустить Spring Boot?

1. ### Создание и настройка проекта

#### Следует изучить как создать проект в IDE, в которой работаете. Можно воспользоваться [сайтом](https://start.spring.io/ "тот самый сайт")

2. ### Внедрение зависимости spring-web в pom.xml

#### Открываем файл `pom.xml` и добавляем зависимость
```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
``` 

3. ### Создание контроллера

#### В соответсвующем пакете создаем класс `Controller.java` и наполняем структуру

:exclamation: Для примера 
```java
package com.example.demo.controller;
 
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
 
@Controller
public class Controller {
 
    @RequestMapping("/hello")
    @ResponseBody
    public String helloWorld()
    {
        return "Hello World!";
    }
}
```

#### Для проверки запустите приложение внутри демонстрационного `*.java` (* - название приложения)

4. ### Запуск Spring Boot

#### Для полноценного запуска вашего первого spring boot-приложения следует нажать на значок

![start](/labs/lab6/tools/start.png)

#### После проделанного пути в консоле будет указан порт, на котором запущенно приложение. В браузере вводим `http://localhost:{port-number}/hello`

#### Теперь можно редактировать структуру вашего проекта

## `6` Требуется ли для запуска Spring Boot отдельный контейнер?

### Spring контейнер может являться частью любого приложения, которое вы делаете на java. Spring может работать внутри веб-контейнера, ejb контейнера, но и без них он также работает.

### Нет, не требуется

### `7` Как настроить приложение Spring Boot с помощью maven?

### Уже имея структуру [проекта](#5-как-можно-запустить-spring-boot), следует установить [*maven*](https://maven.apache.org/download.cgi). В переменную окружения `path` необходимо добавить путь к каталогу `bin`. Для проверки следует протестировать maven, узнав ее версию
```
mvn -v
```  
### Тест пройден при отображении информации о Apache Maven

### Для сборки maven необходимо создать файл `pom.xml` с дефолтным содержанием 

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springframework</groupId>
    <artifactId>gs-maven</artifactId>
    <packaging>jar</packaging>
    <version>0.1.0</version>

   <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <transformers>
                                <transformer
                                    implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                    <mainClass>hello.HelloWorld</mainClass>
                                </transformer>
                            </transformers>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project>
```

### Теперь с помощью maven можно собрать проект

```
mvn compile
mvn package
mvn install
```

### Приложение настроено и готово к работе, но не стоит забывать о зависимостях, которые следует внедрять в файле `pom.xml`. Без их внедрения maven не сможет разобрать код программы и по этой причине не скомпилирует проект.

### 

## `8` Какие встроенные серверы поддерживает Spring Boot?

### Для Spring Boot Application вы можете сгенерировать jar приложения, который содержит Embedded Tomcat. Можно запустить веб-приложение как обычное Java-приложение

### Под встроенным сервером подразумевается, что наш развертываемый модуль содержит двоичные файлы для сервера типа `tomcat.jar`.

```xml
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-tomcat</artifactId>
  <version>2.0.0.RELEASE</version>
  <scope>compile</scope>
</dependency>
```

### Несложно заметить, что по умолчанию Starter Web включает зависимость от tomcat.


### Tomcat является встроенным сервером по умолчанию для Spring Boot. Spring Boot также поддерживает Jetty и Undertow.

## `9` Для чего используются аннотации @RestController и @Controller?

```java
@Controller
@ResponseBody
public class MVCController {
   //logic
}
```

`"Знак равенства"`

```java
@RestController
public class RestFulController {
  //logic
}
```

## @Controller

---

### Используется в классах Java, которые играют роль контроллера в вашем приложении.  `@Controller` Аннотаций позволяет автоопределение классов компонентов в пути к классам и автоматическим регистрации бин для них. Чтобы включить автоматическое обнаружение таких аннотированных контроллеров, вы можете добавить компонентное сканирование в вашу конфигурацию. Класс Java с комментариями  `@Controller`  способен обрабатывать несколько сопоставлений запросов.

## @RestController

---

### Эта аннотация используется на уровне класса. В  `@RestController` аннотации класс исполняется в качестве контроллера , где каждый метод возвращает объект домена вместо зрения. Аннотируя класс этой аннотацией, вам больше не нужно добавлять  `@ResponseBody` все  RequestMapping методы. Это означает, что вы больше не используете средства разрешения представления или не отправляете HTML в ответ. Вы просто отправляете объект домена в виде HTTP-ответа в формате, понятном потребителям, например JSON.

### `@RestController`  это удобная аннотация, которая сочетает в себе  `@Controller` и   `@ResponseBody`.

## `10` Что такое Thymeleaf?

![тимелиф](/labs/lab6/tools/thymeleaf.png)

### [Thymeleaf](https://www.thymeleaf.org/ "Официальный сайт") - это движок шаблонов Java XML / XHTML / HTML5 , который может работать как в вебе, так и в не веб-средах. Он лучше подходит для обслуживания XHTML / HTML5 на уровне представления веб-приложений на основе MVC, но он может обрабатывать любой XML-файл даже в автономной среде. Он обеспечивает полную интеграцию с Spring Framework.

### В веб-приложениях Thymeleaf стремится полностью заменить JavaServer Pages (JSP) и реализует концепцию естественных шаблонов: файлов шаблонов, которые можно открывать непосредственно в браузерах и которые по-прежнему корректно отображаются в виде веб-страниц.

### Thymeleaf - это программное обеспечение с открытым исходным кодом, лицензированное по лицензии Apache License 2.0.
